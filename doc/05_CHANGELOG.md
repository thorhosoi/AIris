# Airis 変更履歴

## [2.3.0] - 2025-10-13

### 追加機能
- **対話モード**: 要件を会話で詰めていくインタラクティブREPL
  - `python -m airis.main` で対話モード起動
  - 複数ターンの会話で要件を明確化
  - `interactive <リクエスト>` コマンドで開始
- **出力検証システム**: AI同士のダブルチェック機能
  - ValidatorAgentによる品質保証
  - 正確性、完全性、品質、エラーの4観点から検証
  - 検証結果を自動表示（OK/NG/改善推奨）
- **処理フロードキュメント**: 詳細な処理順序の説明
- **対話モードドキュメント**: 使用方法とベストプラクティス

### 改善
- **ユーザー体験**: 自然な会話で要件を詰められる
- **精度向上**: 曖昧な指示でも対話で明確化
- **品質保証**: 自動検証でエラーを削減
- **柔軟性**: 対話中の修正・キャンセルが可能

### 技術的変更
- `airis/interactive_mode.py`: 対話セッション管理
- `airis/interactive_cli.py`: 対話型CLIインターフェース
- `agents/validator_agent.py`: 出力検証エージェント
- `doc/10_PROCESSING_FLOW.md`: 処理フロー詳細ドキュメント
- `doc/11_VALIDATION_SYSTEM.md`: 検証システムドキュメント
- `doc/12_INTERACTIVE_MODE.md`: 対話モードドキュメント

## [2.2.0] - 2025-10-13

### 追加機能
- **動的設定読み込み**: config.yaml変更時の自動反映機能
- **デバッグコマンド**: `ai engine debug` で設定状態を詳細確認
- **設定リロード機能**: コンテナ再起動なしで設定変更を反映

### 改善
- **Gemini API修正**: モデル名を `gemini-2.5-pro` に更新して404エラーを解決
- **パッケージ更新**: `duckduckgo_search` から `ddgs` に移行
- **設定保存機能修正**: `ai engine save` コマンドの動作を修正
- **Docker設定改善**: イメージ名とプロジェクト名を明示的に指定
- **コード品質向上**: 型ヒントとドキュメント文字列を追加

### 修正
- Gemini API 404エラー（モデル名の問題）
- duckduckgo_search警告（パッケージ名変更）
- ai engine save機能のバグ（config._config → config.settings）
- Docker設定キャッシュ問題（動的読み込み実装）
- Dockerイメージ名の重複問題（name: airis 追加）

### 技術的変更
- `airis/config.py`: 型ヒントとドキュメント追加
- `airis/ai_engine_manager.py`: 動的設定読み込み実装
- `airis/ai_engine_commands.py`: デバッグコマンド追加
- `agents/gemini_agent.py`: モデル名を gemini-2.5-pro に変更
- `agents/web_search_agent.py`: ddgs パッケージに移行
- `docker-compose.yml`: name と image を明示的に指定

## [2.1.0] - 2025-10-13

### 追加機能
- **AIエンジン選択システム**: ユーザーがAIエンジンを自由に選択可能
- **コンプライアンスモード**: 企業ポリシーに基づくエンジン制限機能
- **コスト最適化モード**: タスク複雑度に応じた自動エンジン選択
- **Cursor統合強化**: コード生成をCursorに委譲する機能
- **動的エンジン選択**: タスクタイプに応じた最適なエンジン選択
- **設定管理コマンド**: `ai engine` コマンド群の追加

### 改善
- オーケストレーターのルーティングロジックをAIエンジンマネージャーに統合
- 設定ファイル構造をYAMLベースの柔軟な管理に変更
- デフォルトエンジンをGeminiに変更（コスト最適化）
- Cursorエージェントにコード生成機能を追加

### 技術的変更
- **AIエンジンマネージャー**: `airis/ai_engine_manager.py` 追加
- **AIエンジンコマンド**: `airis/ai_engine_commands.py` 追加
- **設定構造変更**: `config.yaml` にAIエンジン設定セクション追加
- **Cursor統合**: macOSパス自動検出機能追加

### 修正
- Cursorのパス設定問題（macOS自動検出）
- AIエンジンコマンドの解析ロジック
- 設定の永続化機能

## [2.0.0] - 2025-10-13

### 追加機能
- **Web検索エージェント**: DuckDuckGoを使用したWeb検索機能
- **Webブラウジングエージェント**: URLからのコンテンツ取得・要約機能
- **ドキュメント完成度チェックエージェント**: ドキュメントの自動完成機能
- **Git管理エージェント**: 自動git操作（add, commit, push）機能
- **日本語ドキュメント生成**: 全てのドキュメントを日本語で生成
- **自動Gitコミット**: コード変更時の自動git管理

### 改善
- **コード実行エラー修正**: `temp_code.py not found`エラーの解決
- **APIレート制限対応**: max_tokensを4,000に削減
- **ドキュメント品質向上**: 完成度チェック機能による品質確保
- **エラーハンドリング強化**: より詳細なエラーメッセージ

### 技術的変更
- **ファイル名変更**: `GEMINI.md` → `PROJECT_KNOWLEDGE.md`
- **依存関係追加**: `duckduckgo-search`, `beautifulsoup4`, `lxml`
- **アーキテクチャ拡張**: 4つの新エージェント追加
- **キーワードルーティング**: 新エージェント用のルーティング追加

### 修正
- **Base64エンコーディング**: コード実行の安定性向上
- **Git設定自動化**: 初回実行時のgit設定自動化
- **ドキュメントプロンプト**: 日本語化と品質向上

### 削除
- **古いファイル**: 不要なプロジェクトファイルの削除

## [1.0.0] - 2025-10-12

### 初期リリース
- **基本アーキテクチャ**: Orchestrator + Agent System
- **コード生成エージェント**: Pythonコード生成・実行
- **シェルエージェント**: シェルコマンド実行
- **プロジェクト管理**: プロジェクト作成・切り替え
- **ドキュメント生成**: 要件定義書・設計書生成
- **Dockerサンドボックス**: セキュアな実行環境
- **ユーザー承認機能**: 危険な操作の事前承認

### 技術スタック
- **言語**: Python 3.11+
- **フレームワーク**: LangChain, Typer
- **AI**: Anthropic Claude
- **コンテナ**: Docker
- **テスト**: pytest

---

## 変更履歴の記録方法

### バージョン番号規則
- **メジャー**: 破壊的変更、新機能追加
- **マイナー**: 新機能追加（後方互換性あり）
- **パッチ**: バグ修正、小さな改善

### 変更タイプ
- **追加**: 新機能
- **改善**: 既存機能の向上
- **修正**: バグ修正
- **削除**: 機能削除
- **技術的変更**: 内部実装の変更

### 記録基準
- ユーザーに影響する変更
- 技術的な重要な変更
- 設定ファイルの変更
- 依存関係の変更

---

**文書管理**

- **更新者**: AIris Development Team
- **承認者**: Project Manager
- **次回更新予定**: 機能追加時

**文書終了**
