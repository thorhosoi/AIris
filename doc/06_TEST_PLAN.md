# Airis 総合テスト計画書

## バージョン情報

| 項目 | 内容 |
|------|------|
| 作成日 | 2025-10-13 |
| バージョン | 2.1.0 |
| テスト対象 | Airis 全機能 |
| 作成者 | AIris Development Team |

---

## 1. テスト概要

### 1.1 目的
Airis v2.1.0の全機能が正常に動作することを確認し、品質を保証する。

### 1.2 テスト範囲
- AIエンジン選択システム
- 各エージェントの基本機能
- オーケストレーターのルーティング
- プロジェクト管理機能
- ドキュメント生成機能
- Git管理機能
- Web検索・ブラウジング機能
- 設定管理機能

### 1.3 テスト環境
- **OS**: macOS 24.6.0
- **Docker**: Docker Compose環境
- **Python**: 3.11+
- **API**: Anthropic Claude, Google Gemini, Cursor

---

## 2. テスト項目一覧

### 2.1 AIエンジン選択システム

#### 2.1.1 基本設定テスト
| テストID | テスト項目 | 期待結果 | 優先度 |
|----------|------------|----------|--------|
| AI-001 | デフォルトエンジン設定 | `ai engine set default gemini` でデフォルトエンジンがGeminiに変更される | 高 |
| AI-002 | タスク別エンジン設定 | `ai engine set task code_generation cursor` でコード生成がCursorに設定される | 高 |
| AI-003 | エンジン情報表示 | `ai engine info` で現在の設定が正しく表示される | 中 |
| AI-004 | 設定保存 | `ai engine save` で設定がconfig.yamlに保存される | 中 |
| AI-005 | 設定リセット | `ai engine reset` で設定がデフォルトに戻る | 低 |

#### 2.1.2 コンプライアンスモードテスト
| テストID | テスト項目 | 期待結果 | 優先度 |
|----------|------------|----------|--------|
| AI-006 | コンプライアンスモード有効化 | `ai engine enable compliance gemini local` で制限されたエンジンのみ使用可能 | 高 |
| AI-007 | コンプライアンスモード無効化 | `ai engine disable compliance` で制限が解除される | 高 |
| AI-008 | 制限されたエンジンでのタスク実行 | コンプライアンスモードでClaudeタスクがGeminiにフォールバックされる | 高 |

#### 2.1.3 コスト最適化モードテスト
| テストID | テスト項目 | 期待結果 | 優先度 |
|----------|------------|----------|--------|
| AI-009 | コスト最適化モード有効化 | `ai engine enable cost optimization` でコスト最適化が有効になる | 高 |
| AI-010 | 高複雑度タスク | "complex enterprise system" でClaudeが選択される | 中 |
| AI-011 | 中複雑度タスク | "analyze code" でGeminiが選択される | 中 |
| AI-012 | 低複雑度タスク | "simple hello world" でWeb検索が選択される | 中 |

### 2.2 エージェント機能テスト

#### 2.2.1 コード生成エージェント
| テストID | テスト項目 | 期待結果 | 優先度 |
|----------|------------|----------|--------|
| CODE-001 | 基本コード生成 | "code generate fibonacci function" でフィボナッチ関数が生成される | 高 |
| CODE-002 | 複雑なコード生成 | "code generate web scraper" でWebスクレイパーが生成される | 高 |
| CODE-003 | エラーハンドリング | 無効なコードでエラーメッセージが表示される | 中 |
| CODE-004 | ファイル保存 | 生成されたコードが適切なファイルに保存される | 高 |

#### 2.2.2 Cursorエージェント
| テストID | テスト項目 | 期待結果 | 優先度 |
|----------|------------|----------|--------|
| CURSOR-001 | ファイル開封 | "cursor open test.py" でファイルがCursorで開かれる | 高 |
| CURSOR-002 | コード生成 | "code generate calculator" でCursorでコード生成が開始される | 高 |
| CURSOR-003 | バージョン確認 | "cursor version" でCursorのバージョンが表示される | 中 |
| CURSOR-004 | パス検出 | macOSでCursorのパスが自動検出される | 中 |

#### 2.2.3 Geminiエージェント
| テストID | テスト項目 | 期待結果 | 優先度 |
|----------|------------|----------|--------|
| GEMINI-001 | コード分析 | "gemini analyze code" でコードが分析される | 高 |
| GEMINI-002 | ドキュメント改善 | "gemini improve document" でドキュメントが改善される | 高 |
| GEMINI-003 | エラーハンドリング | APIキーなしでエラーメッセージが表示される | 中 |
| GEMINI-004 | モデル選択 | 正しいGeminiモデルが使用される | 中 |

#### 2.2.4 Web検索エージェント
| テストID | テスト項目 | 期待結果 | 優先度 |
|----------|------------|----------|--------|
| WEB-001 | 基本検索 | "search Python best practices" で検索結果が返される | 高 |
| WEB-002 | 日本語検索 | "search 機械学習 最新技術" で日本語検索が実行される | 中 |
| WEB-003 | 検索結果要約 | 検索結果が適切に要約される | 高 |
| WEB-004 | エラーハンドリング | ネットワークエラーで適切なメッセージが表示される | 中 |

#### 2.2.5 Webブラウジングエージェント
| テストID | テスト項目 | 期待結果 | 優先度 |
|----------|------------|----------|--------|
| BROWSE-001 | URL取得 | "browse https://github.com" でGitHubの内容が取得される | 高 |
| BROWSE-002 | コンテンツ要約 | 取得したコンテンツが適切に要約される | 高 |
| BROWSE-003 | エラーハンドリング | 無効なURLでエラーメッセージが表示される | 中 |
| BROWSE-004 | レート制限対応 | 429エラーで適切なメッセージが表示される | 中 |

#### 2.2.6 Gitエージェント
| テストID | テスト項目 | 期待結果 | 優先度 |
|----------|------------|----------|--------|
| GIT-001 | Git状態確認 | "git status" でGitの状態が表示される | 高 |
| GIT-002 | ファイル追加 | "git add test.py" でファイルがステージングされる | 高 |
| GIT-003 | コミット | "git commit 'Add new feature'" でコミットが作成される | 高 |
| GIT-004 | プッシュ | "git push" でリモートにプッシュされる | 中 |
| GIT-005 | 自動ワークフロー | "git auto" でadd, commit, pushが自動実行される | 高 |

#### 2.2.7 シェルエージェント
| テストID | テスト項目 | 期待結果 | 優先度 |
|----------|------------|----------|--------|
| SHELL-001 | 基本コマンド | "shell ls -la" でディレクトリ一覧が表示される | 高 |
| SHELL-002 | 複雑なコマンド | "shell find . -name '*.py'" でPythonファイルが検索される | 中 |
| SHELL-003 | エラーハンドリング | 無効なコマンドでエラーメッセージが表示される | 中 |
| SHELL-004 | 権限チェック | 権限のないコマンドで適切なメッセージが表示される | 中 |

### 2.3 プロジェクト管理機能

#### 2.3.1 プロジェクト作成・管理
| テストID | テスト項目 | 期待結果 | 優先度 |
|----------|------------|----------|--------|
| PROJ-001 | プロジェクト作成 | "create project test_project" でプロジェクトが作成される | 高 |
| PROJ-002 | プロジェクト切り替え | "switch project test_project" でプロジェクトが切り替わる | 高 |
| PROJ-003 | プロジェクト一覧 | "list projects" でプロジェクト一覧が表示される | 中 |
| PROJ-004 | プロジェクト削除 | "delete project test_project" でプロジェクトが削除される | 低 |

#### 2.3.2 ドキュメント生成
| テストID | テスト項目 | 期待結果 | 優先度 |
|----------|------------|----------|--------|
| DOC-001 | 要件定義書生成 | "generate requirements" で要件定義書が生成される | 高 |
| DOC-002 | 設計書生成 | "generate design" で設計書が生成される | 高 |
| DOC-003 | README生成 | "generate readme" でREADMEが生成される | 高 |
| DOC-004 | 日本語生成 | 全てのドキュメントが日本語で生成される | 高 |
| DOC-005 | ドキュメント完成度チェック | 不完全なドキュメントが自動完成される | 高 |

### 2.4 オーケストレーター機能

#### 2.4.1 タスクルーティング
| テストID | テスト項目 | 期待結果 | 優先度 |
|----------|------------|----------|--------|
| ORCH-001 | キーワードルーティング | "search" でWeb検索エージェントが選択される | 高 |
| ORCH-002 | コード生成ルーティング | "code" でCursorエージェントが選択される | 高 |
| ORCH-003 | ドキュメントルーティング | "document" でドキュメント完成エージェントが選択される | 高 |
| ORCH-004 | Gitルーティング | "git" でGitエージェントが選択される | 高 |
| ORCH-005 | デフォルトルーティング | 不明なタスクでデフォルトエージェントが選択される | 中 |

#### 2.4.2 エラーハンドリング
| テストID | テスト項目 | 期待結果 | 優先度 |
|----------|------------|----------|--------|
| ORCH-006 | エージェント不在 | 存在しないエージェントでエラーメッセージが表示される | 中 |
| ORCH-007 | APIエラー | APIエラーで適切なメッセージが表示される | 中 |
| ORCH-008 | タイムアウト | タイムアウトで適切なメッセージが表示される | 中 |

### 2.5 統合テスト

#### 2.5.1 エンドツーエンドテスト
| テストID | テスト項目 | 期待結果 | 優先度 |
|----------|------------|----------|--------|
| E2E-001 | 完全な開発サイクル | プロジェクト作成→コード生成→ドキュメント生成→Git管理が一連で実行される | 高 |
| E2E-002 | 複数エージェント連携 | Web検索→コード生成→ドキュメント生成が連携して実行される | 高 |
| E2E-003 | エラー回復 | 途中でエラーが発生しても適切に回復される | 中 |
| E2E-004 | 設定変更の反映 | 実行中に設定を変更しても反映される | 低 |

---

## 3. テスト実行手順

### 3.1 事前準備
1. Docker環境の確認
2. APIキーの設定確認
3. テスト用プロジェクトの準備
4. ログ出力の設定

### 3.2 テスト実行
```bash
# 基本機能テスト
echo y | docker-compose run -T --rm airis python3 -m airis.main "ai engine info"

# コード生成テスト
echo y | docker-compose run -T --rm airis python3 -m airis.main "code generate hello world"

# Web検索テスト
echo y | docker-compose run -T --rm airis python3 -m airis.main "search Python best practices"

# プロジェクト管理テスト
echo y | docker-compose run -T --rm airis python3 -m airis.main "create project test_project"
```

### 3.3 テスト結果記録
- 各テストの実行結果を記録
- エラーが発生した場合は詳細を記録
- パフォーマンス測定（実行時間、メモリ使用量）

---

## 4. テスト完了基準

### 4.1 必須条件
- 高優先度テスト項目の100%成功
- 中優先度テスト項目の90%以上成功
- 重大なエラー（システムクラッシュ等）の0件

### 4.2 品質基準
- レスポンス時間: 各エージェント5秒以内
- メモリ使用量: 500MB以下
- エラー率: 5%以下

---

## 5. テスト環境

### 5.1 ハードウェア要件
- CPU: 2コア以上
- メモリ: 4GB以上
- ディスク: 10GB以上の空き容量

### 5.2 ソフトウェア要件
- Docker Desktop
- Python 3.11+
- 必要なAPIキー（Anthropic, Google, Cursor）

### 5.3 ネットワーク要件
- インターネット接続
- HTTPS通信可能
- ファイアウォール設定確認

---

## 6. リスク管理

### 6.1 技術的リスク
- APIレート制限
- ネットワーク接続問題
- Docker環境の問題

### 6.2 対策
- テスト間隔の調整
- オフラインテストの準備
- 代替環境の準備

---

## 7. テストスケジュール

| フェーズ | 期間 | 内容 |
|----------|------|------|
| 準備 | 1日 | 環境構築、テストデータ準備 |
| 単体テスト | 2日 | 各エージェントの個別テスト |
| 統合テスト | 2日 | エージェント間の連携テスト |
| システムテスト | 1日 | エンドツーエンドテスト |
| 修正・再テスト | 1日 | 問題修正と再テスト |
| 完了 | 1日 | 結果まとめ、報告書作成 |

**合計期間**: 8日間

---

## 8. テスト結果テンプレート

### 8.1 テスト実行記録
```
テストID: [テストID]
実行日時: [YYYY-MM-DD HH:MM:SS]
実行者: [実行者名]
結果: [PASS/FAIL/SKIP]
実行時間: [秒]
エラーメッセージ: [エラーがある場合]
備考: [その他の情報]
```

### 8.2 問題報告書
```
問題ID: [問題ID]
発見日時: [YYYY-MM-DD HH:MM:SS]
発見者: [発見者名]
重要度: [高/中/低]
問題の概要: [問題の簡潔な説明]
再現手順: [問題を再現する手順]
期待結果: [期待される結果]
実際の結果: [実際に発生した結果]
影響範囲: [影響を受ける機能]
```

---

## 9. 承認・承認者

| 項目 | 承認者 | 承認日 | 署名 |
|------|--------|--------|------|
| テスト計画 | [承認者名] | [日付] | [署名] |
| テスト実行 | [承認者名] | [日付] | [署名] |
| テスト完了 | [承認者名] | [日付] | [署名] |

---

**文書管理情報**
- 作成者: AIris Development Team
- 承認者: [承認者名]
- 最終更新: 2025-10-13
- バージョン: 1.0
